function v(r){document.querySelectorAll(".kg-embed-card iframe").forEach(s=>{const o=s.getAttribute("width"),n=s.getAttribute("height");!isNaN(o)&&!isNaN(n)&&(s.classList.add("has-aspect-ratio"),s.style.setProperty("--asona--aspect-ratio",`${o}/${n}`))})}const A=Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));function E(){document.querySelectorAll(".kg-gallery-image img").forEach(t=>{const s=t.closest(".kg-gallery-image"),o=t.getAttribute("width"),n=t.getAttribute("height"),c=o/n;s.style.flex=c+" 1 0%"})}const $=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));function j(){document.querySelectorAll(".kg-header-card.kg-v2").forEach(t=>{const s=window.getComputedStyle(t).getPropertyValue("background-color");if(s==="rgb(240, 240, 240)"||s==="rgb(0, 0, 0)"){const o=s==="rgb(240, 240, 240)"?"light":"dark";t.classList.add(`kg-style-${o}`),t.style.removeProperty("background-color"),t.querySelectorAll("h1, h2, h3, h4, h5, h6, p").forEach(n=>{n.style.removeProperty("color")})}})}const k=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));function O(){document.querySelectorAll(".kg-signup-card").forEach(t=>{const s=window.getComputedStyle(t).getPropertyValue("background-color");if(s==="rgb(240, 240, 240)"||s==="rgb(0, 0, 0)"){const o=s==="rgb(240, 240, 240)"?"light":"dark";t.classList.add(`kg-style-${o}`),t.style.removeProperty("background-color"),t.querySelectorAll("h1, h2, h3, h4, h5, h6, p, .kg-signup-card-success, .kg-signup-card-error").forEach(n=>{n.style.removeProperty("color")})}})}const x=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));function T(r){document.querySelectorAll(".kg-toggle-heading button").forEach(o=>o.addEventListener("click",s,!1));function s(o){const c=o.target.closest(".kg-toggle-card"),l=c.querySelector(".kg-toggle-content"),a=c.getAttribute("data-kg-toggle-state")==="close",i=l.scrollHeight;c.setAttribute("data-kg-toggle-state",a?"opening":"closing"),l.style.setProperty("--asona--toggle--max-height",`${i}px`),a||setTimeout(()=>{l.style.setProperty("--asona--toggle--max-height","0px")},10),setTimeout(()=>{c.setAttribute("data-kg-toggle-state",a?"open":"close")},300)}}const P=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));function q(){const r=document.querySelector(".comments iframe");r?.addEventListener("load",o=>{const n=o.target;n.contentDocument.documentElement.classList.add("asona-comments-iframe"),document.querySelectorAll("style").forEach(c=>{n.contentDocument.head.appendChild(c.cloneNode(!0))}),document.querySelectorAll('link[rel="stylesheet"]').forEach(c=>{n.contentDocument.head.appendChild(c.cloneNode(!0))}),t(s())}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>{const n=o.matches?"dark":"light";t(n)}),window.addEventListener("asona:color-scheme-changed",o=>{const n=o.detail.colorScheme;t(n)});function t(o){o=o==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o,r?.contentDocument.documentElement.setAttribute("data-has-dark-mode-support",!0),r?.contentDocument.documentElement.setAttribute("data-prefers-color-scheme",o),r?.contentDocument.querySelector(".ghost-display")?.classList.toggle("dark",o==="dark")}function s(){const o=window.localStorage.getItem("asona-prefers-color-scheme");return o||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}}const M=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));function I(){const r=document.querySelector(".pagination-load-more");if(!r)return;const t=r.closest(".pagination"),s=document.querySelector(".posts-feed"),o=window.asona_infinite_scroll===!0;let n=null;o&&(n=new window.IntersectionObserver(l=>{l[0].isIntersecting&&r.click()},{threshold:0,rootMargin:"100%"}),n.observe(t)),r.addEventListener("click",c,!1);function c(l){l.preventDefault();const a=l.currentTarget,i=a.getAttribute("href"),e=a.getAttribute("data-state")==="loading",d={page:parseInt(t.querySelector("[data-pagination-page]").getAttribute("data-pagination-page"),10),pages:parseInt(t.querySelector("[data-pagination-pages]").getAttribute("data-pagination-pages"),10)};e||(d.page++,r.setAttribute("data-state","loading"),window.fetch(i).then(u=>u.text()).then(u=>{const g=new window.DOMParser().parseFromString(u,"text/html"),m=g.querySelectorAll(".posts-feed .post"),f=g.querySelector(".pagination-load-more"),_=g.querySelector(".pagination__info"),w=t.querySelector(".pagination__info");if(m&&(m.forEach((S,J)=>{s.append(S)}),m[0].querySelector(".post-card__media")?.focus({preventScroll:!0})),f&&d.page!==d.pages){const b=f.getAttribute("href");r.setAttribute("href",b)}else r.remove(),o&&n.unobserve(t);t.querySelector(".pagination__container").replaceChild(_,w),r.setAttribute("data-state","initial")}).catch(u=>{console.log(u),r.setAttribute("data-state","error")}))}}const L=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));function p(r,t=100){let s;return(...o)=>{clearTimeout(s),s=setTimeout(()=>{r.apply(this,o)},t)}}function F(){const r=document.querySelectorAll('[data-highlight="modern"] .post-card');if(!r.length)return;function t(a,i,e){return Math.min(e,Math.max(a,i)).toFixed(2)}function s(){return window.matchMedia("(max-width: 767px)").matches}let o=[];function n(){o=[];const a=document.documentElement.scrollTop;r.forEach(i=>{const e=i.getBoundingClientRect(),d=i.querySelector(".post-card__content").getBoundingClientRect(),u={startFadeIn:e.top+a-window.innerHeight*.9,stopFadeIn:e.top+a-window.innerHeight*.45,startFadeOut:d.top+a-64,stopFadeOut:e.height+e.top+a-e.height/8,startTranslate:e.top+a+e.height/8,stopTranslate:e.top+a+e.height*3};o.push({element:i,anime:u,height:e.height,isMobile:s()})})}function c(){const a=document.documentElement.scrollTop;for(let i=0;i<o.length;i++){const e=o[i];if(e.anime.startFadeOut<=a&&e.anime.stopFadeOut>=a){const d=1-(a-e.anime.startFadeOut)/(e.anime.stopFadeOut-e.anime.startFadeOut);e.element.style.opacity=t(d,.1,1)}if(e.anime.startFadeOut>=a&&e.anime.startFadeIn<=a&&(e.element.style.opacity=1),(e.anime.stopFadeOut<a||e.anime.startFadeIn>a)&&(e.element.style.opacity=.1),e.anime.startFadeIn<=a&&e.anime.stopFadeIn>=a){const d=(a-e.anime.startFadeIn)/(e.anime.stopFadeIn-e.anime.startFadeIn);e.element.style.opacity=t(d,.1,1)}if(e.anime.startTranslate<=a&&e.anime.stopTranslate>=a&&!e.isMobile){const d=(a-e.anime.startTranslate)/(e.anime.stopTranslate-e.anime.startTranslate),u=Math.round(d*e.height*1.3);e.element.style.transform=`translate3d(0, ${u}px, 0)`}e.anime.startTranslate>a&&(e.element.style.transform="translate3d(0,0,0)")}}window.addEventListener("resize",p(()=>{n(),c()}));function l(){c(),window.requestAnimationFrame(l)}n(),l()}const C=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));function H(r){document.querySelectorAll(".sharing-buttons [data-social]").forEach(o=>o.addEventListener("click",s));function s(o){const n=o.currentTarget,c=n.getAttribute("data-social"),l=n.getAttribute("href");if(c==="copy-link"){const a=n.getAttribute("data-copy-link");return window.navigator.clipboard.writeText(a).then(()=>{const i=n.querySelector("[role=tooltip]");i.setAttribute("aria-hidden","false"),setTimeout(()=>{i.setAttribute("aria-hidden","true")},2500)}),!1}if(c!=="mail"){o.preventDefault();const a="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=500,top=40,left=40";window.open(l,"_blank",a)}}}const z=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));function D(){const r=document.querySelector(".site-header"),t=document.querySelector(".site-actions"),s=r.querySelectorAll("[data-site-action-trigger]"),o=t.querySelector("[data-close-site-actions]");s.forEach(l=>{l.addEventListener("click",n)}),window.addEventListener("resize",p(()=>{window.document.documentElement.style.setProperty("--asona--dvh",`${window.innerHeight}px`)}));function n(l){const a=l.currentTarget,i=a.getAttribute("data-site-action-trigger"),e=a.getAttribute("aria-expanded")==="true",d=document.getElementById(a.getAttribute("aria-controls"));c(),e||(document.body.style.overflow="hidden",window.document.documentElement.style.setProperty("--asona--dvh",`${window.innerHeight}px`),a.setAttribute("aria-expanded",!0),r.setAttribute("data-state",`${i}-opening`),t.style.setProperty("--asona--site-actions--height",`${d.scrollHeight}px`),r.style.setProperty("--asona--site-header--offset",`${window.Math.max(0,r.getBoundingClientRect().top)}px`),setTimeout(()=>{r.setAttribute("data-state",`${i}-open`)},150));const u=new window.CustomEvent("asona:site-actions",{detail:{isExpanded:!e,action:i,el:a,controls:d}});window.dispatchEvent(u)}function c(){s.forEach(l=>{l.setAttribute("aria-expanded",!1)}),r.removeAttribute("data-state"),document.body.style.overflow=""}o.addEventListener("click",c)}const N=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));function B(){document.querySelectorAll("[data-toggle-color-scheme]").forEach(s=>{s.addEventListener("click",t)});function t(s){const n=s.currentTarget.getAttribute("data-toggle-color-scheme");n==="system"?(window.localStorage.removeItem("asona-prefers-color-scheme"),document.documentElement.removeAttribute("data-prefers-color-scheme")):(window.localStorage.setItem("asona-prefers-color-scheme",n),document.documentElement.setAttribute("data-prefers-color-scheme",n));const l=new window.CustomEvent("asona:color-scheme-changed",{detail:{colorScheme:n}});window.dispatchEvent(l)}}const R=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));function W(){const r=document.querySelector(".site-header"),t=o=>{const n=!o[0].isIntersecting;r.setAttribute("data-is-sticky",n)};new window.IntersectionObserver(t,{root:document,threshold:[1]}).observe(r)}const V=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));function U(){const r=document.querySelector(".site-header"),t=document.querySelector(".site-navigation"),s=t.querySelectorAll("[data-open-submenu]"),o=t.scrollHeight,n=new Map;s.forEach(i=>{i.addEventListener("click",c)}),t.querySelectorAll("[data-has-submenu]").forEach(i=>{i.addEventListener("focusout",e=>{!i.contains(e.relatedTarget)&&window.matchMedia("(min-width: 62.5em)").matches&&(i.querySelector("[aria-expanded]").setAttribute("aria-expanded",!1),i.querySelector("[aria-hidden]").setAttribute("aria-hidden",!0))})}),window.addEventListener("resize",p(()=>{a()})),window.addEventListener("asona:site-actions",i=>{i.detail.isExpanded?a():n.clear()}),document.addEventListener("click",i=>{t&&t!==i.target&&!t.contains(i.target)&&l()});function c(i){const e=i.currentTarget,d=e.getAttribute("aria-controls"),u=document.getElementById(d),h=e.closest(".nav-submenu"),g=e.getAttribute("aria-expanded")==="true",m=u.scrollHeight;e.setAttribute("aria-expanded",!g),u.setAttribute("aria-hidden",g),g?(u.style.setProperty("--nav-submenu-max-height",0),n.set(d,0)):(h&&h.style.setProperty("--nav-submenu-max-height",h.scrollHeight+m+"px"),u.style.setProperty("--nav-submenu-max-height",m+"px"),n.set(d,m)),a()}function l(i){s.forEach(e=>{e.setAttribute("aria-expanded",!1),e.nextElementSibling.setAttribute("aria-hidden",!0)}),n.clear()}function a(){const i=window.getComputedStyle(document.documentElement).getPropertyValue("--asona--safe-area--bottom")>"0px",e=window.innerHeight,d=Array.from(n.values()).reduce((g,m)=>g+m,0),u=o+d,h=t.getBoundingClientRect().top;i&&e>u+h+10?r.style.setProperty("--asona--safe-area--bottom","0px"):r.style.removeProperty("--asona--safe-area--bottom")}}const Y=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"})),y=Object.assign({"./js/cards/embed.js":A,"./js/cards/gallery.js":$,"./js/cards/header.js":k,"./js/cards/signup.js":x,"./js/cards/toggle.js":P,"./js/components/comments.js":M,"./js/components/pagination-load-more.js":L,"./js/components/posts-highlight-modern.js":C,"./js/components/sharing-buttons.js":z,"./js/components/site-actions.js":N,"./js/components/site-color-scheme.js":R,"./js/components/site-header.js":V,"./js/components/site-navigation.js":Y});for(const r in y)y[r].default();document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{const r=window.innerWidth-document.body.offsetWidth;document.documentElement.setAttribute("data-dom-content-loaded",!0),document.documentElement.style.setProperty("--asona--scrollbar-width",`${r}px`)},10)});const G=new window.MutationObserver(r=>{const t=window.getComputedStyle(document.body);document.documentElement.toggleAttribute("data-scroll-disabled",t.overflow==="hidden")});G.observe(document.body,{attributes:!0});
